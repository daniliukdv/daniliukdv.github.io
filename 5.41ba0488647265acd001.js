(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0JyM":function(l,n,t){"use strict";t.d(n,"a",function(){return e});var e=function(){function l(){}return l.prototype.ngOnInit=function(){},l}()},"6kMe":function(l,n,t){"use strict";var e=t("CcnG"),u=t("VSng"),i=t("gIcY"),o=t("Fa87"),a=t("Ip0R"),r=t("Ge8E"),s=t("EjV3"),c=t("ZYCi"),d=t("9uU2"),p=t("nciF"),g=t("8iQv"),f=t("MWYp"),m=t("4Vzq"),v=t("f4AX");t.d(n,"a",function(){return N});var C=e["\u0275crt"]({encapsulation:0,styles:[["h2[_ngcontent-%COMP%]{text-align:left}textarea[_ngcontent-%COMP%]{width:100%;height:150px}form[_ngcontent-%COMP%]{max-width:45%;width:100%;margin:0 auto}.form-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:0 0 auto}.form-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:right;float:right}.message-control[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:flex-start}.message-control[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}.message-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:30px}"]],data:{}});function h(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,"#"+n.component.ticketId)})}function _(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"button",[["class","orange-button"],["icon","pi pi-check"],["iconPos","right"],["label","Send message"],["pButton",""]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.sentMessage()&&e),e},null,null)),e["\u0275did"](1,4341760,null,0,u.ButtonDirective,[e.ElementRef],{iconPos:[0,"iconPos"],label:[1,"label"],icon:[2,"icon"]},null)],function(l,n){l(n,1,0,"right","Send message","pi pi-check")},null)}function k(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,9,"div",[["class","form-control message-control"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,6,"textarea",[["formControlName","message"],["pInputText",""],["placeholder","Enter a message"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var u=!0;return"input"===n&&(u=!1!==e["\u0275nov"](l,2)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e["\u0275nov"](l,2).onTouched()&&u),"compositionstart"===n&&(u=!1!==e["\u0275nov"](l,2)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e["\u0275nov"](l,2)._compositionEnd(t.target.value)&&u),"input"===n&&(u=!1!==e["\u0275nov"](l,7).onInput(t)&&u),u},null,null)),e["\u0275did"](2,16384,null,0,i.DefaultValueAccessor,[e.Renderer2,e.ElementRef,[2,i.COMPOSITION_BUFFER_MODE]],null,null),e["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,function(l){return[l]},[i.DefaultValueAccessor]),e["\u0275did"](4,671744,null,0,i.FormControlName,[[3,i.ControlContainer],[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR],[2,i["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),e["\u0275prd"](2048,null,i.NgControl,null,[i.FormControlName]),e["\u0275did"](6,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null),e["\u0275did"](7,278528,null,0,o.InputText,[e.ElementRef,[2,i.NgModel]],null,null),(l()(),e["\u0275and"](16777216,null,null,1,null,_)),e["\u0275did"](9,16384,null,0,a.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,4,0,"message"),l(n,7,0),l(n,9,0,t.ticketId)},function(l,n){l(n,1,1,[e["\u0275nov"](n,6).ngClassUntouched,e["\u0275nov"](n,6).ngClassTouched,e["\u0275nov"](n,6).ngClassPristine,e["\u0275nov"](n,6).ngClassDirty,e["\u0275nov"](n,6).ngClassValid,e["\u0275nov"](n,6).ngClassInvalid,e["\u0275nov"](n,6).ngClassPending,!0,!0,!0,!0,e["\u0275nov"](n,7).filled])})}function b(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,8,"div",[["class","message"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,5,"p",[],null,null,null,null,null)),(l()(),e["\u0275eld"](2,0,null,null,1,"span",[["class","message-author"]],null,null,null,null,null)),(l()(),e["\u0275ted"](3,null,[" "," "])),(l()(),e["\u0275eld"](4,0,null,null,2,"span",[["class","message-date"]],null,null,null,null,null)),(l()(),e["\u0275ted"](5,null,[" "," "])),e["\u0275ppd"](6,2),(l()(),e["\u0275eld"](7,0,null,null,1,"p",[["class","message-text"]],null,null,null,null,null)),(l()(),e["\u0275ted"](8,null,["",""]))],null,function(l,n){l(n,3,0,n.context.$implicit.user_name);var t=e["\u0275unv"](n,5,0,l(n,6,0,e["\u0275nov"](n.parent.parent,0),n.context.$implicit.created_at,"dd/MM/yyyy hh:mm a"));l(n,5,0,t),l(n,8,0,n.context.$implicit.message)})}function S(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,2,"div",[["class","messages"]],null,null,null,null,null)),(l()(),e["\u0275and"](16777216,null,null,1,null,b)),e["\u0275did"](2,278528,null,0,a.NgForOf,[e.ViewContainerRef,e.TemplateRef,e.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.messagesList)},null)}function I(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"p-progressSpinner",[],null,null,null,r.b,r.a)),e["\u0275did"](1,49152,null,0,s.ProgressSpinner,[],null,null)],null,null)}function R(l){return e["\u0275vid"](0,[e["\u0275pid"](0,a.DatePipe,[e.LOCALE_ID]),(l()(),e["\u0275eld"](1,0,null,null,63,"div",[["class","white-background"]],null,null,null,null,null)),(l()(),e["\u0275eld"](2,0,null,null,11,"div",[["class","header-with-buttons bordered-header"]],null,null,null,null,null)),(l()(),e["\u0275eld"](3,0,null,null,3,"h2",[],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,[" Ticket "])),(l()(),e["\u0275and"](16777216,null,null,1,null,h)),e["\u0275did"](6,16384,null,0,a.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),e["\u0275eld"](7,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e["\u0275eld"](8,0,null,null,3,"button",[["class","grey-button"],["icon","pi pi-times"],["iconPos","right"],["label","Back"],["pButton",""]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e["\u0275nov"](l,10).onClick()&&u),u},null,null)),e["\u0275did"](9,4341760,null,0,u.ButtonDirective,[e.ElementRef],{iconPos:[0,"iconPos"],label:[1,"label"],icon:[2,"icon"]},null),e["\u0275did"](10,16384,null,0,c.l,[c.k,c.a,[8,null],e.Renderer2,e.ElementRef],{routerLink:[0,"routerLink"]},null),e["\u0275pad"](11,1),(l()(),e["\u0275eld"](12,0,null,null,1,"button",[["class","orange-button"],["iconPos","right"],["pButton",""]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.createUpdateTicket()&&e),e},null,null)),e["\u0275did"](13,4341760,null,0,u.ButtonDirective,[e.ElementRef],{iconPos:[0,"iconPos"],label:[1,"label"]},null),(l()(),e["\u0275eld"](14,0,null,null,47,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,t){var u=!0;return"submit"===n&&(u=!1!==e["\u0275nov"](l,16).onSubmit(t)&&u),"reset"===n&&(u=!1!==e["\u0275nov"](l,16).onReset()&&u),u},null,null)),e["\u0275did"](15,16384,null,0,i["\u0275angular_packages_forms_forms_bh"],[],null,null),e["\u0275did"](16,540672,null,0,i.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),e["\u0275prd"](2048,null,i.ControlContainer,null,[i.FormGroupDirective]),e["\u0275did"](18,16384,null,0,i.NgControlStatusGroup,[[4,i.ControlContainer]],null,null),(l()(),e["\u0275eld"](19,0,null,null,9,"div",[["class","form-control"]],null,null,null,null,null)),(l()(),e["\u0275eld"](20,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Campaign"])),(l()(),e["\u0275eld"](22,0,null,null,6,"p-dropdown",[["formControlName","campaign_id"]],[[2,"ui-inputwrapper-filled",null],[2,"ui-inputwrapper-focus",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,d.b,d.a)),e["\u0275did"](23,13877248,null,1,p.Dropdown,[e.ElementRef,e.Renderer2,e.ChangeDetectorRef,e.NgZone],{options:[0,"options"]},null),e["\u0275qud"](603979776,1,{templates:1}),e["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,function(l){return[l]},[p.Dropdown]),e["\u0275did"](26,671744,null,0,i.FormControlName,[[3,i.ControlContainer],[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR],[2,i["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),e["\u0275prd"](2048,null,i.NgControl,null,[i.FormControlName]),e["\u0275did"](28,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null),(l()(),e["\u0275eld"](29,0,null,null,9,"div",[["class","form-control"]],null,null,null,null,null)),(l()(),e["\u0275eld"](30,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Subject"])),(l()(),e["\u0275eld"](32,0,null,null,6,"input",[["formControlName","subject"],["pInputText",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var u=!0;return"input"===n&&(u=!1!==e["\u0275nov"](l,33)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e["\u0275nov"](l,33).onTouched()&&u),"compositionstart"===n&&(u=!1!==e["\u0275nov"](l,33)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e["\u0275nov"](l,33)._compositionEnd(t.target.value)&&u),"input"===n&&(u=!1!==e["\u0275nov"](l,38).onInput(t)&&u),u},null,null)),e["\u0275did"](33,16384,null,0,i.DefaultValueAccessor,[e.Renderer2,e.ElementRef,[2,i.COMPOSITION_BUFFER_MODE]],null,null),e["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,function(l){return[l]},[i.DefaultValueAccessor]),e["\u0275did"](35,671744,null,0,i.FormControlName,[[3,i.ControlContainer],[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR],[2,i["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),e["\u0275prd"](2048,null,i.NgControl,null,[i.FormControlName]),e["\u0275did"](37,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null),e["\u0275did"](38,278528,null,0,o.InputText,[e.ElementRef,[2,i.NgModel]],null,null),(l()(),e["\u0275eld"](39,0,null,null,9,"div",[["class","form-control"]],null,null,null,null,null)),(l()(),e["\u0275eld"](40,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Description"])),(l()(),e["\u0275eld"](42,0,null,null,6,"input",[["formControlName","description"],["pInputText",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var u=!0;return"input"===n&&(u=!1!==e["\u0275nov"](l,43)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e["\u0275nov"](l,43).onTouched()&&u),"compositionstart"===n&&(u=!1!==e["\u0275nov"](l,43)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e["\u0275nov"](l,43)._compositionEnd(t.target.value)&&u),"input"===n&&(u=!1!==e["\u0275nov"](l,48).onInput(t)&&u),u},null,null)),e["\u0275did"](43,16384,null,0,i.DefaultValueAccessor,[e.Renderer2,e.ElementRef,[2,i.COMPOSITION_BUFFER_MODE]],null,null),e["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,function(l){return[l]},[i.DefaultValueAccessor]),e["\u0275did"](45,671744,null,0,i.FormControlName,[[3,i.ControlContainer],[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR],[2,i["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),e["\u0275prd"](2048,null,i.NgControl,null,[i.FormControlName]),e["\u0275did"](47,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null),e["\u0275did"](48,278528,null,0,o.InputText,[e.ElementRef,[2,i.NgModel]],null,null),(l()(),e["\u0275eld"](49,0,null,null,9,"div",[["class","form-control"]],null,null,null,null,null)),(l()(),e["\u0275eld"](50,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,["Status"])),(l()(),e["\u0275eld"](52,0,null,null,6,"p-dropdown",[["formControlName","ticket_status"]],[[2,"ui-inputwrapper-filled",null],[2,"ui-inputwrapper-focus",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,d.b,d.a)),e["\u0275did"](53,13877248,null,1,p.Dropdown,[e.ElementRef,e.Renderer2,e.ChangeDetectorRef,e.NgZone],{options:[0,"options"]},null),e["\u0275qud"](603979776,2,{templates:1}),e["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,function(l){return[l]},[p.Dropdown]),e["\u0275did"](56,671744,null,0,i.FormControlName,[[3,i.ControlContainer],[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR],[2,i["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),e["\u0275prd"](2048,null,i.NgControl,null,[i.FormControlName]),e["\u0275did"](58,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null),(l()(),e["\u0275eld"](59,0,null,null,0,"div",[["class","bordered-header"]],null,null,null,null,null)),(l()(),e["\u0275and"](16777216,null,null,1,null,k)),e["\u0275did"](61,16384,null,0,a.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),e["\u0275eld"](62,0,null,null,0,"div",[["class","bordered-header"]],null,null,null,null,null)),(l()(),e["\u0275and"](16777216,null,null,1,null,S)),e["\u0275did"](64,16384,null,0,a.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),e["\u0275and"](16777216,null,null,1,null,I)),e["\u0275did"](66,16384,null,0,a.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,6,0,t.ticketId),l(n,9,0,"right","Back","pi pi-times");var u=l(n,11,0,"../../support-tickets");l(n,10,0,u),l(n,13,0,"right",e["\u0275inlineInterpolate"](1,"",t.ticketId?"Update":"Create","")),l(n,16,0,t.editTicketForm),l(n,23,0,t.campaignsList),l(n,26,0,"campaign_id"),l(n,35,0,"subject"),l(n,38,0),l(n,45,0,"description"),l(n,48,0),l(n,53,0,t.statusList),l(n,56,0,"ticket_status"),l(n,61,0,t.ticketId),l(n,64,0,t.messagesList),l(n,66,0,t.loading)},function(l,n){l(n,12,0,n.component.editTicketForm.invalid),l(n,14,0,e["\u0275nov"](n,18).ngClassUntouched,e["\u0275nov"](n,18).ngClassTouched,e["\u0275nov"](n,18).ngClassPristine,e["\u0275nov"](n,18).ngClassDirty,e["\u0275nov"](n,18).ngClassValid,e["\u0275nov"](n,18).ngClassInvalid,e["\u0275nov"](n,18).ngClassPending),l(n,22,0,e["\u0275nov"](n,23).filled,e["\u0275nov"](n,23).focused,e["\u0275nov"](n,28).ngClassUntouched,e["\u0275nov"](n,28).ngClassTouched,e["\u0275nov"](n,28).ngClassPristine,e["\u0275nov"](n,28).ngClassDirty,e["\u0275nov"](n,28).ngClassValid,e["\u0275nov"](n,28).ngClassInvalid,e["\u0275nov"](n,28).ngClassPending),l(n,32,1,[e["\u0275nov"](n,37).ngClassUntouched,e["\u0275nov"](n,37).ngClassTouched,e["\u0275nov"](n,37).ngClassPristine,e["\u0275nov"](n,37).ngClassDirty,e["\u0275nov"](n,37).ngClassValid,e["\u0275nov"](n,37).ngClassInvalid,e["\u0275nov"](n,37).ngClassPending,!0,!0,!0,!0,e["\u0275nov"](n,38).filled]),l(n,42,1,[e["\u0275nov"](n,47).ngClassUntouched,e["\u0275nov"](n,47).ngClassTouched,e["\u0275nov"](n,47).ngClassPristine,e["\u0275nov"](n,47).ngClassDirty,e["\u0275nov"](n,47).ngClassValid,e["\u0275nov"](n,47).ngClassInvalid,e["\u0275nov"](n,47).ngClassPending,!0,!0,!0,!0,e["\u0275nov"](n,48).filled]),l(n,52,0,e["\u0275nov"](n,53).filled,e["\u0275nov"](n,53).focused,e["\u0275nov"](n,58).ngClassUntouched,e["\u0275nov"](n,58).ngClassTouched,e["\u0275nov"](n,58).ngClassPristine,e["\u0275nov"](n,58).ngClassDirty,e["\u0275nov"](n,58).ngClassValid,e["\u0275nov"](n,58).ngClassInvalid,e["\u0275nov"](n,58).ngClassPending)})}function y(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"app-ticket",[],null,null,null,R,C)),e["\u0275did"](1,114688,null,0,g.a,[c.a,f.a,i.FormBuilder,m.MessageService,v.a],null,null)],function(l,n){l(n,1,0)},null)}var N=e["\u0275ccf"]("app-ticket",g.a,y,{},{},[])},"8iQv":function(l,n,t){"use strict";t.d(n,"a",function(){return u}),t("MWYp");var e=t("gIcY"),u=(t("24Yq"),t("f4AX"),function(){function l(l,n,t,u,i){var o=this;this.activatedRoute=l,this.supportService=n,this.formBuilder=t,this.messageService=u,this.userService=i,this.statusList=[],this.campaignsList=[],this.messagesList=[],this.loading=!0,this.editTicketForm=this.formBuilder.group({subject:[null,e.Validators.compose([e.Validators.required])],ticket_status:[null,e.Validators.compose([e.Validators.required])],campaign_id:[null,e.Validators.compose([e.Validators.required])],description:[null,e.Validators.compose([e.Validators.required])],message:[null]}),this.activatedRoute.paramMap.subscribe(function(l){o.ticketId=l.get("ticketId")}),this.statusList=[{label:"Active",value:"1"},{label:"Resolved",value:"2"}]}return l.prototype.ngOnInit=function(){this.getTicket(),this.getCampaigns()},l.prototype.createUpdateTicket=function(){var l=this;this.supportService.createUpdateTicket(this.editTicketForm.value,this.ticketId).subscribe(function(n){history.back(),l.messageService.add({severity:"success",summary:n.message,closable:!0})})},l.prototype.sentMessage=function(){var l=this;this.supportService.sentMessage(this.ticketId,{message:this.editTicketForm.value.message}).subscribe(function(){return l.getComments()})},l.prototype.getTicket=function(){var l=this;this.ticketId?(this.getComments(),this.supportService.getTicket(this.ticketId).subscribe(function(n){l.campaignsList.push({label:n.data.customer_name+" ("+n.data.campaign_type+")",value:n.data.campaign_id.toString()}),n.data.ticket_status=n.data.ticket_status.toString(),l.editTicketForm.patchValue(n.data),l.loading=!1})):(this.editTicketForm.get("ticket_status").patchValue(this.statusList[0].value),this.loading=!1)},l.prototype.getCampaigns=function(){var l=this;this.supportService.getCampaigns(this.userService.user.id).subscribe(function(n){for(var t=0,e=n.data;t<e.length;t++){var u=e[t];"standard"===u.campaign_type||"google"===u.campaign_type?u.campaign_type="Google":"facebook"===u.campaign_type?u.campaign_type="Facebook":"call_rails"===u.campaign_type&&(u.campaign_type="Call rails"),l.campaignsList.push({label:u.customer_name+" ("+u.campaign_type+") ID: "+u.id,value:u.id.toString()})}l.loading=!1})},l.prototype.getComments=function(){var l=this;this.supportService.getComments(this.ticketId).subscribe(function(n){l.messagesList=n.data.reverse()})},l}())},MWYp:function(l,n,t){"use strict";t.d(n,"a",function(){return e}),t("qc5V");var e=function(){function l(l){this.apiService=l}return l.prototype.getCampaigns=function(l){return this.apiService.request("GET","campaigns?offset=0&limit=100&"+l,{})},l.prototype.getTickets=function(l){return this.apiService.request("GET","tickets?customer_id="+l,{})},l.prototype.getTicket=function(l){return this.apiService.request("GET","tickets/"+l,{})},l.prototype.getComments=function(l){return this.apiService.request("GET","tickets/"+l+"/comments",{})},l.prototype.sentMessage=function(l,n){return this.apiService.request("POST","tickets/"+l+"/comments",n)},l.prototype.createUpdateTicket=function(l,n){return n?(l._method="patch",this.apiService.request("POST","tickets/"+n,l)):this.apiService.request("POST","tickets",l)},l}()},Xmev:function(l,n,t){"use strict";t.d(n,"a",function(){return s});var e=t("CcnG"),u=t("ZYCi"),i=t("0JyM"),o=e["\u0275crt"]({encapsulation:2,styles:[],data:{}});function a(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e["\u0275did"](1,212992,null,0,u.p,[u.b,e.ViewContainerRef,e.ComponentFactoryResolver,[8,null],e.ChangeDetectorRef],null,null)],function(l,n){l(n,1,0)},null)}function r(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"app-support",[],null,null,null,a,o)),e["\u0275did"](1,114688,null,0,i.a,[],null,null)],function(l,n){l(n,1,0)},null)}var s=e["\u0275ccf"]("app-support",i.a,r,{},{},[])},dCA8:function(l,n,t){"use strict";var e=t("CcnG"),u=t("VSng"),i=t("ZYCi"),o=t("Ge8E"),a=t("EjV3"),r=t("Ip0R"),s=t("o8w/"),c=t("ofeg"),d=t("oygf"),p=t("xZRq"),g=t("MWYp"),f=t("f4AX");t.d(n,"a",function(){return k});var m=e["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function v(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,3,"button",[["class","orange-button"],["icon","pi pi-check"],["iconPos","right"],["label","Create"],["pButton",""]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e["\u0275nov"](l,2).onClick()&&u),u},null,null)),e["\u0275did"](1,4341760,null,0,u.ButtonDirective,[e.ElementRef],{iconPos:[0,"iconPos"],label:[1,"label"],icon:[2,"icon"]},null),e["\u0275did"](2,16384,null,0,i.l,[i.k,i.a,[8,null],e.Renderer2,e.ElementRef],{routerLink:[0,"routerLink"]},null),e["\u0275pad"](3,1)],function(l,n){l(n,1,0,"right","Create","pi pi-check");var t=l(n,3,0,"create");l(n,2,0,t)},null)}function C(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"p-progressSpinner",[],null,null,null,o.b,o.a)),e["\u0275did"](1,49152,null,0,a.ProgressSpinner,[],null,null)],null,null)}function h(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,8,"div",[["class","white-background"]],null,null,null,null,null)),(l()(),e["\u0275eld"](1,0,null,null,5,"div",[["class","header-with-buttons"]],null,null,null,null,null)),(l()(),e["\u0275eld"](2,0,null,null,1,"h2",[],null,null,null,null,null)),(l()(),e["\u0275ted"](-1,null,[" Support tickets "])),(l()(),e["\u0275eld"](4,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e["\u0275and"](16777216,null,null,1,null,v)),e["\u0275did"](6,16384,null,0,r.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),e["\u0275eld"](7,0,null,null,1,"app-datatable",[],null,null,null,s.b,s.a)),e["\u0275did"](8,114688,null,0,c.a,[d.ConfirmationService],{cols:[0,"cols"],data:[1,"data"],openable:[2,"openable"]},null),(l()(),e["\u0275and"](16777216,null,null,1,null,C)),e["\u0275did"](10,16384,null,0,r.NgIf,[e.ViewContainerRef,e.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,6,0,"customer"===t.userService.user.role),l(n,8,0,t.tableHeaders,t.supportTicketsList,!0),l(n,10,0,t.loading)},null)}function _(l){return e["\u0275vid"](0,[(l()(),e["\u0275eld"](0,0,null,null,1,"app-tickets",[],null,null,null,h,m)),e["\u0275did"](1,114688,null,0,p.a,[g.a,i.a,f.a],null,null)],function(l,n){l(n,1,0)},null)}var k=e["\u0275ccf"]("app-tickets",p.a,_,{},{},[])},otHs:function(l,n,t){"use strict";t.d(n,"a",function(){return e}),t("0JyM"),t("xZRq"),t("8iQv");var e=function(){return function(){}}()},uCiB:function(l,n,t){"use strict";t.d(n,"a",function(){return e});var e=function(){return function(){}}()},xZRq:function(l,n,t){"use strict";t.d(n,"a",function(){return e}),t("MWYp"),t("f4AX");var e=function(){function l(l,n,t){var e=this;this.supportService=l,this.activatedRoute=n,this.userService=t,this.loading=!0,this.supportTicketsList=[],this.activatedRoute.paramMap.subscribe(function(l){e.customerId=l.get("id")}),this.tableHeaders=[{header:"Campaign",field:"campaign_type"},{header:"Subject",field:"subject"},{header:"Created",field:"created_at"},{header:"Status",field:"ticket_status"}]}return l.prototype.ngOnInit=function(){this.getTickets()},l.prototype.getTickets=function(){var l=this;this.supportService.getTickets(this.customerId?this.customerId:this.userService.user.id).subscribe(function(n){for(var t=0,e=n.data;t<e.length;t++){var u=e[t];u.ticket_status=1===u.ticket_status?"Active":"Resolved",u.campaign_type="standard"===u.campaign_type?"Google. ID: "+u.campaign_id:u.campaign_type+". ID: "+u.campaign_id}l.supportTicketsList=n.data,l.loading=!1})},l}()}}]);